# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –Ω–∞ Raspberry Pi 3

–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü –Ω–∞ Raspberry Pi 3.

## üìã –ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

### –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- ‚úÖ Raspberry Pi 3 Model B/B+
- ‚úÖ MicroSD –∫–∞—Ä—Ç–∞ 16GB+ —Å Raspberry Pi OS
- ‚úÖ USB –≤–µ–±-–∫–∞–º–µ—Ä–∞ (–∏–ª–∏ IP-–∫–∞–º–µ—Ä–∞ —Å RTSP)
- ‚úÖ –ú–æ–¥—É–ª—å —Ä–µ–ª–µ –¥–ª—è –∑–∞–º–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è 5V 2.5A

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- ‚úÖ Raspberry Pi OS (Bullseye –∏–ª–∏ –Ω–æ–≤–µ–µ)
- ‚úÖ SSH –¥–æ—Å—Ç—É–ø –∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä + –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É (—Ç–æ–ª—å–∫–æ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏)

---

## üöÄ –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Raspberry Pi

### 1.1 –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Raspberry Pi

**–í–∞—Ä–∏–∞–Ω—Ç A: SSH**
```bash
# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
ssh pi@raspberrypi.local
# –ü–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: raspberry
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –∏ –º—ã—à—å

### 1.2 –û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
sudo apt update && sudo apt upgrade -y

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ (–µ—Å–ª–∏ –±—ã–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —è–¥—Ä–∞)
sudo reboot
```

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —Å–Ω–æ–≤–∞.

### 1.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Python

```bash
python3 --version
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å Python 3.9+ (–Ω–∞ Bullseye/Bookworm –±—É–¥–µ—Ç 3.9 –∏–ª–∏ 3.11)
```

---

## üì¶ –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 2.1 –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo apt install -y \
    python3-pip \
    python3-venv \
    libopencv-dev \
    python3-opencv \
    libatlas-base-dev \
    libjpeg-dev \
    libopenblas-dev \
    gpiod \
    libgpiod2 \
    python3-libgpiod \
    git

# –≠—Ç–æ –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç
```

### 2.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GPIO –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É gpio
sudo usermod -a -G gpio $USER

# –ü—Ä–æ–≤–µ—Ä–∫–∞
groups $USER
# –î–æ–ª–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å: pi gpio ...
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü–æ—Å–ª–µ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –Ω—É–∂–Ω–æ **–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è**:
```bash
sudo reboot
```

---

## üì• –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 3.1 –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Raspberry Pi

**–í–∞—Ä–∏–∞–Ω—Ç A: –° USB —Ñ–ª–µ—à–∫–∏**
```bash
# –í—Å—Ç–∞–≤—å—Ç–µ —Ñ–ª–µ—à–∫—É –∏ –Ω–∞–π–¥–∏—Ç–µ –µ—ë
lsblk
# –û–±—ã—á–Ω–æ —ç—Ç–æ /dev/sda1

# –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
sudo mkdir -p /mnt/usb
sudo mount /dev/sda1 /mnt/usb

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
cp -r /mnt/usb/rp3_face_access /home/pi/
cd /home/pi/rp3_face_access

# –†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
sudo umount /mnt/usb
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ SCP —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞**
```bash
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–Ω–µ –Ω–∞ Raspberry Pi)
scp -r rp3_face_access pi@raspberrypi.local:/home/pi/
```

**–í–∞—Ä–∏–∞–Ω—Ç C: Git (–µ—Å–ª–∏ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)**
```bash
cd /home/pi
git clone https://github.com/yourusername/rp3_face_access.git
cd rp3_face_access
```

### 3.2 –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
cd /home/pi/rp3_face_access

# –°–æ–∑–¥–∞–Ω–∏–µ venv
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è
source venv/bin/activate

# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è (venv)
```

### 3.3 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pip
pip install --upgrade pip

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –≠—Ç–æ –∑–∞–π–º–µ—Ç 10-15 –º–∏–Ω—É—Ç –Ω–∞ Raspberry Pi 3
```

**–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:**
```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã –ø–æ –æ–¥–Ω–æ–º—É
pip install numpy
pip install opencv-python
pip install onnxruntime
pip install PyYAML
pip install pytest
```

---

## üé• –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–º–µ—Ä—ã

### 4.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ USB –∫–∞–º–µ—Ä—É

```bash
# –°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
v4l2-ctl --list-devices

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# USB Camera (usb-0000:01:00.0):
#         /dev/video0

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–º–µ—Ä–µ
v4l2-ctl -d /dev/video0 --all

# –ï—Å–ª–∏ –∫–∞–º–µ—Ä—ã –Ω–µ—Ç –≤ /dev/video0, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ /dev/video1, /dev/video2 –∏ —Ç.–¥.
```

### 4.2 –¢–µ—Å—Ç –∑–∞—Ö–≤–∞—Ç–∞ –∫–∞–¥—Ä–∞ (Python)

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ venv –µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
source venv/bin/activate

# –¢–µ—Å—Ç –∫–∞–º–µ—Ä—ã
python3 << EOF
import cv2
print("–û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–º–µ—Ä—É...")
cap = cv2.VideoCapture(0)

if not cap.isOpened():
    print("‚ùå –û–®–ò–ë–ö–ê: –ö–∞–º–µ—Ä–∞ –Ω–µ –æ—Ç–∫—Ä—ã–ª–∞—Å—å")
    print("–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π ID: cv2.VideoCapture(1) –∏–ª–∏ (2)")
else:
    print("‚úÖ –ö–∞–º–µ—Ä–∞ –æ—Ç–∫—Ä—ã–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ")
    ret, frame = cap.read()
    if ret and frame is not None:
        print(f"‚úÖ –ö–∞–¥—Ä –ø–æ–ª—É—á–µ–Ω: {frame.shape}")
        print(f"   –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: {frame.shape[1]}x{frame.shape[0]}")
    else:
        print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∫–∞–¥—Ä")
    cap.release()
print("–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω")
EOF
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–º–µ—Ä—É...
‚úÖ –ö–∞–º–µ—Ä–∞ –æ—Ç–∫—Ä—ã–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ
‚úÖ –ö–∞–¥—Ä –ø–æ–ª—É—á–µ–Ω: (480, 640, 3)
   –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 640x480
–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω
```

---

## üîå –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ GPIO

### 5.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ libgpiod

```bash
# –°–ø–∏—Å–æ–∫ GPIO —á–∏–ø–æ–≤
gpiodetect

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# gpiochip0 [pinctrl-bcm2835] (54 lines)
```

### 5.2 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
ls -l /dev/gpiochip0

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# crw-rw---- 1 root gpio ... /dev/gpiochip0
#                    ^^^^
#                    –≥—Ä—É–ø–ø–∞ gpio

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã –≤ –≥—Ä—É–ø–ø–µ gpio
groups
# –î–æ–ª–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å: gpio
```

### 5.3 –¢–µ—Å—Ç GPIO (–±–µ–∑ —Ä–µ–ª–µ)

```bash
source venv/bin/activate

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ GPIO 17
python3 tools/test_gpio.py --line 17

# –ò–ª–∏ –¥—Ä—É–≥–æ–π GPIO
python3 tools/test_gpio.py --line 18
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
GPIO Test Tool (libgpiod)
==================================================
Chip: gpiochip0
Line: 17
Duration: 2.0s
==================================================

Opening gpiochip0...
‚úì Chip opened: pinctrl-bcm2835 (54 lines)

Getting line 17...

Requesting line 17 as output...
‚úì Line requested successfully

==================================================
Starting GPIO test sequence
==================================================

Cycle 1/3:
  Setting line 17 to HIGH (1)...
  ‚úì GPIO HIGH (relay should activate)
  ...
```

### 5.4 –¢–µ—Å—Ç GPIO —Å –º—É–ª—å—Ç–∏–º–µ—Ç—Ä–æ–º (–µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–ª–µ)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –º—É–ª—å—Ç–∏–º–µ—Ç—Ä –∫ GPIO 17 –∏ GND

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
python3 tools/test_gpio.py --line 17

# –ú—É–ª—å—Ç–∏–º–µ—Ç—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
# - ~3.3V –∫–æ–≥–¥–∞ GPIO HIGH
# - ~0V –∫–æ–≥–¥–∞ GPIO LOW
```

---

## üì¶ –®–∞–≥ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ONNX –º–æ–¥–µ–ª–∏

### 6.1 –°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å InsightFace

**–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (—Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º):**

–í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
# –°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å —Å https://github.com/deepinsight/insightface
# –ù–∞–ø—Ä–∏–º–µ—Ä: buffalo_l, buffalo_m, buffalo_s
```

–í–∞—Ä–∏–∞–Ω—Ç 2: ONNX Model Zoo
```bash
# –ò–ª–∏ –∏–∑ https://github.com/onnx/models
```

### 6.2 –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª—å –Ω–∞ Raspberry Pi

```bash
# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
scp insightface_model.onnx pi@raspberrypi.local:/home/pi/rp3_face_access/models/

# –ò–ª–∏ —á–µ—Ä–µ–∑ USB —Ñ–ª–µ—à–∫—É
```

### 6.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–¥–µ–ª—å –Ω–∞ Raspberry Pi

```bash
cd /home/pi/rp3_face_access
ls -lh models/

# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–π–ª .onnx —Ä–∞–∑–º–µ—Ä–æ–º 50-200 MB
```

### 6.4 –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏

```bash
source venv/bin/activate

python3 << EOF
import onnxruntime as ort
import numpy as np

print("–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏...")
session = ort.InferenceSession('models/insightface_model.onnx')

print("‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
print(f"–í—Ö–æ–¥: {session.get_inputs()[0].name} {session.get_inputs()[0].shape}")
print(f"–í—ã—Ö–æ–¥: {session.get_outputs()[0].name} {session.get_outputs()[0].shape}")

# –¢–µ—Å—Ç –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
dummy_input = np.random.randn(1, 3, 112, 112).astype(np.float32)
print("\n–¢–µ—Å—Ç –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞...")
output = session.run(None, {session.get_inputs()[0].name: dummy_input})
print(f"‚úÖ –ò–Ω—Ñ–µ—Ä–µ–Ω—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ä–∞–∑–º–µ—Ä –≤—ã—Ö–æ–¥–∞: {output[0].shape}")
EOF
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏...
‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
–í—Ö–æ–¥: input.1 [1, 3, 112, 112]
–í—ã—Ö–æ–¥: 683 [1, 512]

–¢–µ—Å—Ç –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞...
‚úÖ –ò–Ω—Ñ–µ—Ä–µ–Ω—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ä–∞–∑–º–µ—Ä –≤—ã—Ö–æ–¥–∞: (1, 512)
```

---

## ‚öôÔ∏è –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 7.1 –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –∫–æ–Ω—Ñ–∏–≥

```bash
cd /home/pi/rp3_face_access

# –ö–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
cp config/usb_config.yaml config/my_config.yaml

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ
nano config/my_config.yaml
```

### 7.2 –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ:**

```yaml
# –ü—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π —Ñ–∞–π–ª)
face:
  onnx_model_path: "models/insightface_model.onnx"  # –í–ê–® –§–ê–ô–õ

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π!)
ble:
  shared_secret: "–ò–ó–ú–ï–ù–ò–¢–ï_–≠–¢–û_–ù–ê_–°–õ–£–ß–ê–ô–ù–£–Æ_–°–¢–†–û–ö–£"

# –ö–∞–º–µ—Ä–∞ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ device_id –∏–∑ –®–∞–≥–∞ 4)
camera:
  type: usb
  device_id: 0  # –ò–ª–∏ 1, 2 –µ—Å–ª–∏ –∫–∞–º–µ—Ä–∞ –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É

# GPIO (–¥–ª—è —Ç–µ—Å—Ç–æ–≤ –≤–∫–ª—é—á–∏—Ç–µ mock)
lock:
  gpio_pin: 17
  gpio_chip: "gpiochip0"
  active_high: true
  mock_mode: true  # –î–ª—è –ø–µ—Ä–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –ë–ï–ó —Ä–µ–ª–µ

# –ê–¥–º–∏–Ω —Ä–µ–∂–∏–º (–¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
access:
  admin_mode_enabled: true  # –í–∫–ª—é—á–∏—Ç–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ**: `Ctrl+O`, `Enter`, `Ctrl+X`

### 7.3 –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞
python3 -c "import os; print(os.urandom(32).hex())"

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ ble.shared_secret –≤ –∫–æ–Ω—Ñ–∏–≥–µ
```

---

## üß™ –®–∞–≥ 8: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (—Ç–µ—Å—Ç)

### 8.1 –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

```bash
cd /home/pi/rp3_face_access
mkdir -p data
```

### 8.2 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏

```bash
source venv/bin/activate

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
python src/main.py --config config/my_config.yaml --log-level DEBUG
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**
```
2025-01-22 10:00:00 - INFO - Initializing Face Access Control System...
2025-01-22 10:00:01 - INFO - Database initialized at data/access_control.db
2025-01-22 10:00:02 - INFO - USB camera 0 opened: 640x480 @ 15 FPS
2025-01-22 10:00:03 - INFO - OpenCV Haar Cascade detector initialized
2025-01-22 10:00:04 - INFO - ONNX model loaded: models/insightface_model.onnx
2025-01-22 10:00:04 - INFO - Lock controller in MOCK mode (no actual GPIO)
2025-01-22 10:00:05 - INFO - System initialized successfully
2025-01-22 10:00:05 - INFO - Starting recognition loop
2025-01-22 10:00:05 - INFO - BLE Server started (mock)
```

**–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:**
- –ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Üí –∏–∑–º–µ–Ω–∏—Ç–µ `device_id` –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å `onnx_model_path`
- GPIO –æ—à–∏–±–∫–∞ ‚Üí —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `mock_mode: true`

### 8.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

–û—Ç–∫—Ä–æ–π—Ç–µ **–Ω–æ–≤—ã–π** —Ç–µ—Ä–º–∏–Ω–∞–ª SSH:
```bash
cd /home/pi/rp3_face_access
tail -f face_access.log
```

### 8.4 –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å –∑–∞–ø—É—â–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π: `Ctrl+C`

```
2025-01-22 10:05:00 - INFO - Received shutdown signal
2025-01-22 10:05:00 - INFO - Stopping system...
2025-01-22 10:05:01 - INFO - Recognition loop stopped
2025-01-22 10:05:01 - INFO - BLE Server stopped
2025-01-22 10:05:01 - INFO - GPIO cleaned up
2025-01-22 10:05:01 - INFO - Database connection closed
2025-01-22 10:05:01 - INFO - System stopped
```

---

## üë§ –®–∞–≥ 9: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

### 9.1 –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ñ–æ—Ç–æ

**–ù–∞ Raspberry Pi:**
```bash
cd /home/pi/rp3_face_access

# –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–æ—Ç–æ
mkdir -p test_photos

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ 2-3 —Ñ–æ—Ç–æ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
# –§–æ—Ç–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å JPEG, —Å —Ö–æ—Ä–æ—à–∏–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º, –ª–∏—Ü–æ —Ö–æ—Ä–æ—à–æ –≤–∏–¥–Ω–æ
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ç–æ:**
- ‚úÖ –§–æ—Ä–º–∞—Ç: JPEG
- ‚úÖ –†–∞–∑–º–µ—Ä: –º–∏–Ω–∏–º—É–º 640x480
- ‚úÖ –û–¥–Ω–æ –ª–∏—Ü–æ –Ω–∞ —Ñ–æ—Ç–æ
- ‚úÖ –õ–∏—Ü–æ –Ω–µ –º–µ–Ω–µ–µ 80x80 –ø–∏–∫—Å–µ–ª–µ–π
- ‚úÖ –•–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
- ‚úÖ –†–∞–∑–Ω—ã–µ —É–≥–ª—ã (—Ñ—Ä–æ–Ω—Ç, –Ω–µ–±–æ–ª—å—à–æ–π –ø–æ–≤–æ—Ä–æ—Ç)

### 9.2 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–º—É–ª—è—Ç–æ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

```bash
source venv/bin/activate

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ TEST001
python tools/ble_client_simulator.py \
  --action register \
  --employee-id TEST001 \
  --display-name "–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" \
  --access-start "2025-01-01T00:00:00Z" \
  --access-end "2026-12-31T23:59:59Z" \
  --photos test_photos/photo1.jpg test_photos/photo2.jpg test_photos/photo3.jpg \
  --shared-secret "–í–ê–®_–°–ï–ö–†–ï–¢_–ò–ó_–ö–û–ù–§–ò–ì–ê"
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –°–∏–º—É–ª—è—Ç–æ—Ä —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã. –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ BLE —Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### 9.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
sqlite3 data/access_control.db "SELECT * FROM employees;"

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# TEST001|–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å|2025-01-01T00:00:00Z|2026-12-31T23:59:59Z|1|...

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
sqlite3 data/access_control.db "SELECT employee_id, COUNT(*) FROM embeddings GROUP BY employee_id;"

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# TEST001|3
```

---

## üé≠ –®–∞–≥ 10: –¢–µ—Å—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü–∞

### 10.1 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É

```bash
source venv/bin/activate

python src/main.py --config config/my_config.yaml
```

### 10.2 –í—Å—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π

- –†–∞—Å–ø–æ–ª–æ–∂–∏—Ç–µ –ª–∏—Ü–æ –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ 50-100 —Å–º)
- –•–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
- –°–º–æ—Ç—Ä–∏—Ç–µ –≤ –∫–∞–º–µ—Ä—É

### 10.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

–í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
tail -f /home/pi/rp3_face_access/face_access.log
```

**–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏:**
```
2025-01-22 10:10:05 - INFO - Access GRANTED: TEST001 (–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) - score: 0.752
2025-01-22 10:10:05 - INFO - [MOCK] Lock state: UNLOCKED
2025-01-22 10:10:08 - INFO - [MOCK] Lock state: LOCKED
2025-01-22 10:10:08 - INFO - Lock re-engaged
```

**–ü—Ä–∏ –æ—Ç–∫–∞–∑–µ:**
```
2025-01-22 10:10:05 - INFO - Access DENIED: Face not recognized - score: 0.412
```

### 10.4 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞—É–¥–∏—Ç –ª–æ–≥

```bash
sqlite3 data/access_control.db "SELECT timestamp, event_type, matched_employee_id, similarity_score, result FROM audit_log ORDER BY timestamp DESC LIMIT 5;"
```

---

## üîí –®–∞–≥ 11: –¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ä–µ–ª–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

‚ö†Ô∏è **–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –≤–∞—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–æ —Ä–µ–ª–µ!**

### 11.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ª–µ

```
Raspberry Pi          Relay Module
-----------          ------------
GPIO 17     ------>  IN
5V          ------>  VCC
GND         ------>  GND
```

### 11.2 –ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥

```bash
nano config/my_config.yaml
```

```yaml
lock:
  gpio_pin: 17
  gpio_chip: "gpiochip0"
  active_high: true
  mock_mode: false  # –í–´–ö–õ–Æ–ß–ò–¢–ï mock —Ä–µ–∂–∏–º
```

### 11.3 –¢–µ—Å—Ç —Ä–µ–ª–µ

```bash
# –¢–µ—Å—Ç GPIO —Å —Ä–µ–ª–µ
python3 tools/test_gpio.py --line 17

# –†–µ–ª–µ –¥–æ–ª–∂–Ω–æ —â–µ–ª–∫–∞—Ç—å –∏ LED –∑–∞–≥–æ—Ä–∞—Ç—å—Å—è/–≥–∞—Å–Ω—É—Ç—å
```

### 11.4 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É —Å —Ä–µ–ª–µ

```bash
python src/main.py --config config/my_config.yaml
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏ —Ä–µ–ª–µ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã.

---

## üìä –®–∞–≥ 12: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 12.1 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU/RAM

–í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
# –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
top

# –ò–ª–∏ –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π
htop  # sudo apt install htop
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ Raspberry Pi 3:**
- CPU: 40-80% –ø—Ä–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏
- RAM: 200-400 MB
- FPS: 1-3 –∫–∞–¥—Ä–∞ –≤ —Å–µ–∫—É–Ω–¥—É

### 12.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

```bash
# –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ CPU
vcgencmd measure_temp

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å < 80¬∞C
# –ï—Å–ª–∏ > 80¬∞C ‚Üí –¥–æ–±–∞–≤—å—Ç–µ —Ä–∞–¥–∏–∞—Ç–æ—Ä –∏–ª–∏ –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä
```

### 12.3 –¢–µ—Å—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

–°–º–æ—Ç—Ä–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö –≤—Ä–µ–º—è –º–µ–∂–¥—É –¥–µ—Ç–µ–∫—Ü–∏–µ–π –∏ —Ä–µ—à–µ–Ω–∏–µ–º:

```bash
tail -f face_access.log | grep -E "face detected|Access GRANTED|Access DENIED"
```

–û–±—ã—á–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: 0.5-1.5 —Å–µ–∫—É–Ω–¥—ã.

---

## üîÑ –®–∞–≥ 13: –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 13.1 –°–æ–∑–¥–∞–π—Ç–µ systemd —Å–µ—Ä–≤–∏—Å

```bash
sudo nano /etc/systemd/system/face-access.service
```

–í—Å—Ç–∞–≤—å—Ç–µ:
```ini
[Unit]
Description=Face Access Control System
After=network.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi/rp3_face_access
Environment="PATH=/home/pi/rp3_face_access/venv/bin"
ExecStart=/home/pi/rp3_face_access/venv/bin/python src/main.py --config config/my_config.yaml
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

### 13.2 –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ systemd
sudo systemctl daemon-reload

# –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
sudo systemctl enable face-access.service

# –ó–∞–ø—É—Å–∫
sudo systemctl start face-access.service

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status face-access.service
```

### 13.3 –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–∏—Å–∞

```bash
# –õ–æ–≥–∏ systemd
sudo journalctl -u face-access.service -f

# –ò–ª–∏ —Ñ–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏
tail -f /home/pi/rp3_face_access/face_access.log
```

### 13.4 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo systemctl stop face-access.service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart face-access.service

# –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl disable face-access.service
```

---

## üß™ –®–∞–≥ 14: –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

### 14.1 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã

```bash
cd /home/pi/rp3_face_access
source venv/bin/activate

# –í—Å–µ —Ç–µ—Å—Ç—ã
python -m pytest tests/ -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
python -m pytest tests/test_db.py -v
python -m pytest tests/test_access_control.py -v
python -m pytest tests/test_hmac.py -v
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
tests/test_db.py::TestDatabase::test_upsert_employee PASSED
tests/test_db.py::TestDatabase::test_add_embedding PASSED
...
==================== 15 passed in 2.34s ====================
```

---

## üìà –®–∞–≥ 15: –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤

### 15.1 –≠–∫—Å–ø–æ—Ä—Ç –∞—É–¥–∏—Ç –ª–æ–≥–æ–≤

```bash
source venv/bin/activate

python src/main.py --config config/my_config.yaml --export-logs audit_export.json
```

### 15.2 –ü—Ä–æ—Å–º–æ—Ç—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä JSON
cat audit_export.json | python -m json.tool | less

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
cat audit_export.json | python -m json.tool | grep timestamp | wc -l

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π
cat audit_export.json | python -m json.tool | tail -50
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞–º–µ—Ä–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
ls -l /dev/video*

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ ID
python3 -c "import cv2; [print(f'ID {i}: {cv2.VideoCapture(i).isOpened()}') for i in range(5)]"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
sudo usermod -a -G video $USER
sudo reboot
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª
ls -lh models/*.onnx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ
grep onnx_model_path config/my_config.yaml

# –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏
python3 -c "import onnxruntime as ort; ort.InferenceSession('models/–í–ê–®_–§–ê–ô–õ.onnx'); print('OK')"
```

### –ü—Ä–æ–±–ª–µ–º–∞: GPIO permission denied

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø—É
groups $USER

# –î–æ–±–∞–≤—å—Ç–µ –≤ –≥—Ä—É–ø–ø—É
sudo usermod -a -G gpio $USER

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
sudo reboot
```

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–∏—Ü–æ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è

```bash
# –ü–æ–Ω–∏–∑—å—Ç–µ –ø–æ—Ä–æ–≥ –≤ –∫–æ–Ω—Ñ–∏–≥–µ
nano config/my_config.yaml

# –ò–∑–º–µ–Ω–∏—Ç–µ
face:
  similarity_threshold: 0.5  # –ë—ã–ª–æ 0.6

# –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ —Ñ–æ—Ç–æ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∏—Å—Ç–µ–º–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è

```bash
# –ü–æ–Ω–∏–∑—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
nano config/my_config.yaml

camera:
  width: 320   # –ë—ã–ª–æ 640
  height: 240  # –ë—ã–ª–æ 480

# –ò–ª–∏ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –∫–∞–¥—Ä—ã –≤ main.py
# frame_skip = 3  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π 3-–π –∫–∞–¥—Ä
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] Raspberry Pi –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞
- [ ] –í—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É gpio
- [ ] –ö–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω)
- [ ] GPIO —Ä–∞–±–æ—Ç–∞–µ—Ç (gpiodetect –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç gpiochip0)
- [ ] ONNX –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] –ö–æ–Ω—Ñ–∏–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏, —Å–µ–∫—Ä–µ—Ç, camera ID)
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞
- [ ] –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ª–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç GRANTED)
- [ ] –†–µ–ª–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è (–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ)
- [ ] –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

### –õ–æ–≥–∏

```bash
# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
tail -100 face_access.log

# Systemd –ª–æ–≥–∏
sudo journalctl -u face-access.service --no-pager -n 100

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
grep ERROR face_access.log
grep WARNING face_access.log
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
python3 tools/ble_client_simulator.py --action status

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
sqlite3 data/access_control.db ".tables"
sqlite3 data/access_control.db "SELECT COUNT(*) FROM employees;"
sqlite3 data/access_control.db "SELECT COUNT(*) FROM embeddings;"
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `README.md` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/GPIO_SETUP.md` - GPIO –¥–µ—Ç–∞–ª–∏
- `QUICKSTART.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `TODO_USER.md` - –ß–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Raspberry Pi 3!

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ (–®–∞–≥ 13)
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ª–µ –∫ –∑–∞–º–∫—É
4. –û—Ç–∫–ª—é—á–∏—Ç–µ `admin_mode_enabled` –≤ production
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –±—ç–∫–∞–ø –ë–î

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- FPS: 1-3 –∫–∞–¥—Ä–∞/—Å–µ–∫
- –ó–∞–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è: 0.5-1.5 —Å–µ–∫
- CPU: 40-80%
- RAM: 200-400 MB

–£–¥–∞—á–∏! üöÄ
