# Production configuration for RP3 Face Access Control
# Optimized for stability and security

camera:
  type: rtsp
  rtsp_url: "rtsp://admin:129510@192.168.1.33:554/stream"  # RTSP stream URL
  rtsp_transport: tcp  # tcp or udp
  width: 640
  height: 480
  fps: 15

face:
  onnx_model_path: "/home/pi/RPBluetooth/models/insightface_int8_qdq.onnx"
  detector_type: opencv_haar
  detector_scale_factor: 1.1
  detector_min_neighbors: 5
  detector_min_face_size: [60, 60]
  embedding_dim: 512
  similarity_threshold: 0.5
  quality_min_face_size: 80
  quality_blur_threshold: 100.0
  align_enabled: true
  embedder_backend: opencv  # "opencv" is faster on Raspberry Pi than "onnx"

ble:
  device_name: "RP3_FaceAccess"
  service_uuid: "12345678-1234-5678-1234-56789abcdef0"
  command_char_uuid: "12345678-1234-5678-1234-56789abcdef1"
  response_char_uuid: "12345678-1234-5678-1234-56789abcdef2"
  photo_chunk_size: 512
  max_photo_size: 5242880
  hmac_enabled: true
  shared_secret: "hsepassword"
  use_real_ble: true

access:
  admin_mode_enabled: true
  unlock_duration_sec: 3.0
  cooldown_sec: 0.5  # Reduced from 2.0 for faster recognition
  granted_lockout_sec: 10.0  # Reduced from 30.0 for faster re-recognition
  max_attempts_per_minute: 30  # Increased to allow faster attempts

lock:
  gpio_pin: 17
  gpio_chip: "gpiochip0"
  active_high: false
  mock_mode: false
  button_pin: 27
  button_active_low: true
  button_debounce_ms: 50

database:
  path: "/home/pi/RPBluetooth/data/access_control.db"

log_level: INFO
