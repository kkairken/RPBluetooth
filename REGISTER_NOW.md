# üöÄ –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π** —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±–µ–∑ BLE.

---

## ‚ö° –ó–ê 5 –ú–ò–ù–£–¢

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏

–ù–∞ Raspberry Pi —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏:

```bash
cd /home/pi/rp3_face_access
mkdir -p photos/emp001

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ —ç—Ç—É –ø–∞–ø–∫—É
# –ß–µ—Ä–µ–∑ SCP —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
# scp photo*.jpg pi@raspberrypi.local:/home/pi/rp3_face_access/photos/emp001/
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ç–æ:**
- ‚úÖ –§–æ—Ä–º–∞—Ç: JPEG –∏–ª–∏ PNG
- ‚úÖ –ú–∏–Ω–∏–º—É–º: 640x480 –ø–∏–∫—Å–µ–ª–µ–π
- ‚úÖ –õ–∏—Ü–æ: —Ö–æ—Ä–æ—à–æ –≤–∏–¥–Ω–æ, —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ
- ‚úÖ –û—Å–≤–µ—â–µ–Ω–∏–µ: —è—Ä–∫–æ–µ, —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 2-3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞

---

### –®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

```bash
cd /home/pi/rp3_face_access
source venv/bin/activate

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
python tools/register_employee_direct.py \
  --employee-id "EMP001" \
  --display-name "–ê–¥–∏–ª—å –•–∞–Ω" \
  --access-start "2025-01-01T00:00:00Z" \
  --access-end "2026-12-31T23:59:59Z" \
  --photos photos/emp001/photo1.jpg photos/emp001/photo2.jpg photos/emp001/photo3.jpg
```

**–ò–∑–º–µ–Ω–∏—Ç–µ**:
- `EMP001` - –Ω–∞ ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- `"–ê–¥–∏–ª—å –•–∞–Ω"` - –Ω–∞ –∏–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- `2025-01-01...` - –Ω–∞—á–∞–ª–æ –¥–æ—Å—Ç—É–ø–∞
- `2026-12-31...` - –∫–æ–Ω–µ—Ü –¥–æ—Å—Ç—É–ø–∞
- –ü—É—Ç–∏ –∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
sqlite3 data/access_control.db "SELECT * FROM employees WHERE employee_id='EMP001';"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
sqlite3 data/access_control.db "SELECT COUNT(*) FROM embeddings WHERE employee_id='EMP001';"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
EMP001|–ê–¥–∏–ª—å –•–∞–Ω|2025-01-01T00:00:00+00:00|2026-12-31T23:59:59+00:00|1|...
3
```

---

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ

```bash
# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
python src/main.py --config config/usb_config.yaml

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
tail -f face_access.log
```

**–í—Å—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π** - —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≤–∞—Å!

**–û–∂–∏–¥–∞–µ–º—ã–π –ª–æ–≥:**
```
INFO - Access GRANTED: EMP001 (–ê–¥–∏–ª—å –•–∞–Ω) - score: 0.752
INFO - [MOCK] Lock state: UNLOCKED
```

---

## üìù –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å 2 —Ñ–æ—Ç–æ

```bash
python tools/register_employee_direct.py \
  --employee-id "EMP001" \
  --display-name "–ê–¥–∏–ª—å –•–∞–Ω" \
  --access-start "2025-01-01T00:00:00Z" \
  --access-end "2026-12-31T23:59:59Z" \
  --photos photo1.jpg photo2.jpg
```

### –ü—Ä–∏–º–µ—Ä 2: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥–æ–º

```bash
python tools/register_employee_direct.py \
  --employee-id "EMP002" \
  --display-name "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤" \
  --access-start "2025-06-01T00:00:00Z" \
  --access-end "2025-12-31T23:59:59Z" \
  --photos ivan1.jpg ivan2.jpg ivan3.jpg \
  --config config/my_config.yaml
```

### –ü—Ä–∏–º–µ—Ä 3: –ú–∞—Å—Å–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `register_all.sh`:

```bash
#!/bin/bash

# –°–æ—Ç—Ä—É–¥–Ω–∏–∫ 1
python tools/register_employee_direct.py \
  --employee-id "EMP001" \
  --display-name "–ê–¥–∏–ª—å –•–∞–Ω" \
  --access-start "2025-01-01T00:00:00Z" \
  --access-end "2026-12-31T23:59:59Z" \
  --photos photos/emp001/*.jpg

# –°–æ—Ç—Ä—É–¥–Ω–∏–∫ 2
python tools/register_employee_direct.py \
  --employee-id "EMP002" \
  --display-name "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤" \
  --access-start "2025-01-01T00:00:00Z" \
  --access-end "2026-12-31T23:59:59Z" \
  --photos photos/emp002/*.jpg

# –°–æ—Ç—Ä—É–¥–Ω–∏–∫ 3
python tools/register_employee_direct.py \
  --employee-id "EMP003" \
  --display-name "–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞" \
  --access-start "2025-01-01T00:00:00Z" \
  --access-end "2026-12-31T23:59:59Z" \
  --photos photos/emp003/*.jpg

echo "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
```

–ó–∞–ø—É—Å–∫:
```bash
chmod +x register_all.sh
./register_all.sh
```

---

## üì∏ –ö–ê–ö –°–î–ï–õ–ê–¢–¨ –•–û–†–û–®–ò–ï –§–û–¢–û

### –ù–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å –≤–µ–±-–∫–∞–º–µ—Ä–æ–π:

**Linux/Mac:**
```bash
# –°–¥–µ–ª–∞—Ç—å 3 —Ñ–æ—Ç–æ —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã
ffmpeg -f v4l2 -i /dev/video0 -frames:v 1 photo1.jpg
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ–∑—É, –ø–æ–≤–µ—Ä–Ω–∏—Ç–µ –≥–æ–ª–æ–≤—É –Ω–µ–º–Ω–æ–≥–æ
ffmpeg -f v4l2 -i /dev/video0 -frames:v 1 photo2.jpg
# –°–Ω–æ–≤–∞ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ–∑—É
ffmpeg -f v4l2 -i /dev/video0 -frames:v 1 photo3.jpg
```

### –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ:
1. –°–¥–µ–ª–∞–π—Ç–µ 2-3 —Å–µ–ª—Ñ–∏ —Å —Ö–æ—Ä–æ—à–∏–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ª–∏—Ü–æ —á—ë—Ç–∫–æ–µ –∏ –∑–∞–Ω–∏–º–∞–µ—Ç 30-50% –∫–∞–¥—Ä–∞
3. –°–ª–µ–≥–∫–∞ —Ä–∞–∑–Ω—ã–µ —Ä–∞–∫—É—Ä—Å—ã (—Ñ—Ä–æ–Ω—Ç + –Ω–µ–±–æ–ª—å—à–æ–π –ø–æ–≤–æ—Ä–æ—Ç)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞ Raspberry Pi —á–µ—Ä–µ–∑ USB –∏–ª–∏ SCP

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ñ–æ—Ç–æ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä
identify photo1.jpg

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# photo1.jpg JPEG 1920x1080 1920x1080+0+0 8-bit sRGB 245KB
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "–õ–∏—Ü–æ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –§–æ—Ç–æ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–æ–µ
- –õ–∏—Ü–∞ –Ω–µ –≤–∏–¥–Ω–æ –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ —Å–∫—Ä—ã—Ç–æ
- –°–ª–∏—à–∫–æ–º —Ç—ë–º–Ω–æ–µ —Ñ–æ—Ç–æ

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ç–æ –º–∏–Ω–∏–º—É–º 640x480
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ª–∏—Ü–æ –∑–∞–Ω–∏–º–∞–µ—Ç 30-50% –∫–∞–¥—Ä–∞
- –•–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ —Å–ø–µ—Ä–µ–¥–∏

### –û—à–∏–±–∫–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã—á–∏—Å–ª–∏—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥"

**–ü—Ä–∏—á–∏–Ω—ã:**
- ONNX –º–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏
ls -lh models/*.onnx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ
grep onnx_model_path config/usb_config.yaml
```

### –û—à–∏–±–∫–∞: "No module named 'cv2'"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
source venv/bin/activate
pip install opencv-python
```

### –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: "Low quality photo"

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–∂–µ –µ—Å–ª–∏ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ–µ.

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ
- –£–≤–µ–ª–∏—á—å—Ç–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ñ–æ—Ç–æ —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

---

## ‚úÖ –ü–û–õ–ù–´–ô WORKFLOW

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
mkdir -p photos/{emp001,emp002,emp003}

# 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–æ—Ç–æ
cp /–ø—É—Ç—å/–∫/—Ñ–æ—Ç–æ/emp001_*.jpg photos/emp001/

# 3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# 4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
python tools/register_employee_direct.py \
  --employee-id "EMP001" \
  --display-name "–ê–¥–∏–ª—å –•–∞–Ω" \
  --access-start "2025-01-01T00:00:00Z" \
  --access-end "2026-12-31T23:59:59Z" \
  --photos photos/emp001/*.jpg

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î
sqlite3 data/access_control.db "SELECT * FROM employees;"

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
python src/main.py --config config/usb_config.yaml

# 7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ (–≤—Å—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π)
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
tail -f face_access.log | grep "Access GRANTED"
```

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

```bash
sqlite3 data/access_control.db << EOF
SELECT
  COUNT(*) as total_employees,
  SUM(is_active) as active_employees
FROM employees;

SELECT
  employee_id,
  display_name,
  COUNT(embedding_id) as num_embeddings
FROM employees e
LEFT JOIN embeddings em ON e.employee_id = em.employee_id
GROUP BY e.employee_id;
EOF
```

---

## üéâ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –±–µ–∑ BLE
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ Raspberry Pi
- ‚úÖ –ú–∞—Å—Å–æ–≤–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ –±–∞–∑–µ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†–µ–∞–ª–∏–∑—É–π—Ç–µ –Ω–∞—Å—Ç–æ—è—â–∏–π BLE —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω (—Å–º. `PHONE_REGISTRATION_GUIDE.md`)

---

**–í–µ—Ä—Å–∏—è**: 1.0
**–î–∞—Ç–∞**: 2026-01-24
